import{c as _,l as ie,r as u,a5 as re,o as W,h as y,q as se,t as ne,a2 as X,w as ue,a6 as R,g as ce,d as de,a4 as me,S as P,U as v,V as i,a0 as r,f as l,W as k,y as z,Y as m,Z as M,X as x,Q as $,_ as C}from"./index-Cm6bZCtb.js";import{Q as E}from"./QBadge-Bk9hCOGO.js";import{u as Y,Q as ve,a as D,b as V,c as q}from"./QList-C25ZtbNJ.js";import{Q as j}from"./QRating-CrhRSJCT.js";import{Q as O,a as U}from"./QCard-Bu511efH.js";import{Q as fe}from"./QPage-BiUDp_G9.js";import{u as ge,g as H,a as A}from"./players-Cb9Sk1ng.js";import{t as ye}from"./teamService-CHfQ816M.js";import{T as _e}from"./TeamLogo-D5majQd7.js";import{d as he}from"./date-Chuk8AoO.js";import{u as Se}from"./use-quasar-BjZ55HgA.js";import{_ as be}from"./_plugin-vue_export-helper-CxHgfykZ.js";import"./use-dark-CkpHGi7m.js";import"./private.use-form-Bt6FDSoW.js";import"./format-hlGAdIUH.js";import"./graphql-DMYS3sVo.js";const pe={ratio:[String,Number]};function xe(e,f){return _(()=>{const a=Number(e.ratio||(f!==void 0?f.value:void 0));return isNaN(a)!==!0&&a>0?{paddingBottom:`${100/a}%`}:null})}const qe=1.7778,we=ie({name:"QImg",props:{...pe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:qe},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:f,emit:a}){const h=u(e.initialRatio),S=xe(e,h),b=ce(),{registerTimeout:d,removeTimeout:g}=Y(),{registerTimeout:Q,removeTimeout:I}=Y(),w=_(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),B=_(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),c=[u(null),u(w.value)],s=u(0),o=u(!1),n=u(!1),Z=_(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),G=_(()=>({width:e.width,height:e.height})),J=_(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),K=_(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function ee(){if(I(),e.loadingShowDelay===0){o.value=!0;return}Q(()=>{o.value=!0},e.loadingShowDelay)}function N(){I(),o.value=!1}function te({target:t}){R(b)===!1&&(g(),h.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,L(t,1))}function L(t,p){p===1e3||R(b)===!0||(t.complete===!0?ae(t):d(()=>{L(t,p+1)},50))}function ae(t){R(b)!==!0&&(s.value=s.value^1,c[s.value].value=null,N(),t.getAttribute("__qerror")!=="true"&&(n.value=!1),a("load",t.currentSrc||t.src))}function le(t){g(),N(),n.value=!0,c[s.value].value=B.value,c[s.value^1].value=w.value,a("error",t)}function F(t){const p=c[t].value,T={key:"img_"+t,class:J.value,style:K.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...p};return s.value===t?Object.assign(T,{class:T.class+"current",onLoad:te,onError:le}):T.class+="loaded",y("div",{class:"q-img__container absolute-full",key:"img"+t},y("img",T))}function oe(){return o.value===!1?y("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ne(f[n.value===!0?"error":"default"])):y("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},f.loading!==void 0?f.loading():e.noSpinner===!0?void 0:[y(X,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){ue(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,p=>{g(),n.value=!1,p===null?(N(),c[s.value^1].value=w.value):ee(),c[s.value].value=p},{immediate:!0})};re.value===!0?W(t):t()}return()=>{const t=[];return S.value!==null&&t.push(y("div",{key:"filler",style:S.value})),c[0].value!==null&&t.push(F(0)),c[1].value!==null&&t.push(F(1)),t.push(y(se,{name:"q-transition--fade"},oe)),y("div",{key:"main",class:Z.value,style:G.value,role:"img","aria-label":e.alt},t)}}}),ke={class:"q-pa-md"},Qe={key:0,class:"flex justify-center q-pa-xl"},Ie={key:1,class:"text-negative q-pa-md"},Te={key:2,class:"player-detail"},Pe={class:"row q-col-gutter-lg"},Ce={class:"col-xs-12 col-md-4 flex flex-center"},Be={class:"absolute-full flex flex-center bg-grey-3"},Ne={class:"absolute-bottom text-subtitle2 text-center bg-dark q-pa-xs"},Re={class:"text-h5"},ze={class:"text-subtitle1"},De={class:"text-subtitle1 q-mt-xs"},Ve={class:"col-xs-12 col-md-8"},Le={class:"text-h3 q-mt-none"},Fe={class:"text-subtitle1 q-mb-md"},Me={class:"q-mt-lg"},$e={class:"row items-center"},Ee={class:"col-12 col-md-6"},Ye={key:0,class:"text-subtitle1 q-mt-sm"},je={class:"col-12 col-md-6 q-mt-md q-mt-md-none"},Oe={key:3,class:"text-center q-pa-xl"},Ue=de({__name:"PlayerDetailPage",setup(e){const f=me(),a=u(null),h=u(null),S=u(!0),b=u(null),d=u(0),g=u(0),Q=Se(),I=ge(),w=s=>{if(!s)return"N/A";try{return he.formatDate(s,"MMMM D, YYYY")}catch{return s}},B=()=>{a.value&&d.value>0&&(g.value=d.value,Q.notify({type:"positive",message:`Thank you for rating ${H(a.value)}!`}),d.value=0)},c=_(()=>a.value?H(a.value):"");return W(async()=>{const s=f.params.id;if(!s){b.value="Player ID is required",S.value=!1;return}try{S.value=!0;const o=await I.fetchPlayerById(s);if(a.value=o,!a.value)throw new Error("Player not found");if(a.value.teamId)try{const{team:n}=ye.useTeam(a.value.teamId);h.value=n.value}catch(n){console.error("Error loading team:",n)}}catch(o){console.error("Error fetching player:",o),Q.notify({color:"negative",message:"Failed to load player details",icon:"error"})}finally{S.value=!1}}),(s,o)=>(v(),P(fe,{padding:""},{default:i(()=>[r("div",ke,[l(z,{icon:"arrow_back",label:"Back to Players",flat:"",color:"primary",to:"/players",class:"q-mb-md"}),S.value?(v(),k("div",Qe,[l(X,{color:"primary",size:"3em"})])):b.value?(v(),k("div",Ie,m(b.value),1)):a.value?(v(),k("div",Te,[r("div",Pe,[r("div",Ce,[l(O,{flat:"",bordered:"",class:"player-card"},{default:i(()=>[l(we,{src:a.value.imageUrl||"https://via.placeholder.com/300?text=No+Photo",style:{height:"300px"},fit:"contain",class:"player-photo"},{error:i(()=>[r("div",Be,[l($,{name:"person",size:"4em",color:"grey-7"})])]),default:i(()=>[r("div",Ne,[l(E,{color:M(A)(a.value.position),class:"q-mr-xs"},{default:i(()=>[x(m(a.value.position),1)]),_:1},8,["color"])])]),_:1},8,["src"]),l(U,{class:"text-center"},{default:i(()=>[r("div",Re,m(c.value),1),r("div",ze,m(a.value.nationality),1),l(j,{modelValue:g.value,"onUpdate:modelValue":o[0]||(o[0]=n=>g.value=n),size:"1.5em",max:10,color:"amber",readonly:"",class:"q-mt-sm"},null,8,["modelValue"]),r("div",De," Rating: "+m(g.value.toFixed(1)),1)]),_:1})]),_:1})]),r("div",Ve,[r("h1",Le,m(c.value),1),r("div",Fe,m(a.value.nationality),1),l(ve,{bordered:"",separator:""},{default:i(()=>[a.value.dateOfBirth?(v(),P(D,{key:0},{default:i(()=>[l(V,null,{default:i(()=>[l(q,{caption:""},{default:i(()=>o[2]||(o[2]=[x("Birth Date")])),_:1}),l(q,null,{default:i(()=>[x(m(w(a.value.dateOfBirth)),1)]),_:1})]),_:1})]),_:1})):C("",!0),l(D,null,{default:i(()=>[l(V,null,{default:i(()=>[l(q,{caption:""},{default:i(()=>o[3]||(o[3]=[x("Position")])),_:1}),l(q,null,{default:i(()=>[l(E,{color:M(A)(a.value.position)},{default:i(()=>[x(m(a.value.position),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),a.value.teamId?(v(),P(D,{key:1},{default:i(()=>[l(V,null,{default:i(()=>[l(q,{caption:""},{default:i(()=>o[4]||(o[4]=[x("Team")])),_:1}),l(q,{class:"row items-center"},{default:i(()=>{var n;return[h.value?(v(),P(_e,{key:0,"team-id":h.value.id,size:"40"},null,8,["team-id"])):C("",!0),l(z,{flat:"","no-caps":"",color:"primary",to:`/teams/${a.value.teamId}`,label:((n=h.value)==null?void 0:n.name)||"View Team"},null,8,["to","label"])]}),_:1})]),_:1})]),_:1})):C("",!0)]),_:1})])]),r("div",Me,[o[5]||(o[5]=r("h2",{class:"text-h5"},"Rate Player",-1)),l(O,{flat:"",bordered:""},{default:i(()=>[l(U,null,{default:i(()=>[r("div",$e,[r("div",Ee,[l(j,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=n=>d.value=n),size:"2em",max:10,color:"amber",icon:"star_border","icon-selected":"star"},null,8,["modelValue"]),d.value>0?(v(),k("div",Ye," Your rating: "+m(d.value.toFixed(1)),1)):C("",!0)]),r("div",je,[l(z,{color:"primary",label:"Submit Rating",disable:d.value===0,onClick:B},null,8,["disable"])])])]),_:1})]),_:1})])])):(v(),k("div",Oe,[l($,{name:"sports_soccer",size:"4em",color:"grey-7"}),o[6]||(o[6]=r("p",{class:"text-h6 text-grey-7"},"Player not found",-1))]))])]),_:1}))}}),nt=be(Ue,[["__scopeId","data-v-dfb4207f"]]);export{nt as default};
