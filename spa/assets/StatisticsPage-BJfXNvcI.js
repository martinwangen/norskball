import{a as _,Q as R}from"./QCard-Bu511efH.js";import{d as y,S as u,U as o,V as m,f as t,a0 as n,Y as b,af as T,o as $,W as g,Z as l,a2 as q,Q as P,r as k,w as V}from"./index-Cm6bZCtb.js";import{Q as C}from"./QRating-CrhRSJCT.js";import{Q as N}from"./QTd-B2b-7SvT.js";import{Q as z}from"./QTable-DI5yNRlB.js";import{g as S,_ as Q}from"./_plugin-vue_export-helper-CxHgfykZ.js";import{a as B}from"./QCheckbox-DErdi7or.js";import{u as E}from"./teamService-CHfQ816M.js";import"./use-dark-CkpHGi7m.js";import"./private.use-form-Bt6FDSoW.js";import"./format-hlGAdIUH.js";import"./QSeparator-DLr0b9gN.js";import"./QList-C25ZtbNJ.js";import"./scroll-LBgmWIJC.js";import"./use-prevent-scroll-BbUsLF7j.js";const G={class:"row items-center justify-center"},h=y({__name:"StatisticsTable",props:{players:{}},setup(i){const s=i,a=[{name:"playerName",required:!0,label:"Player",align:"left",field:"playerName",sortable:!0},{name:"averageRating",required:!0,label:"Rating",align:"center",field:"averageRating",sortable:!0},{name:"ratingCount",required:!0,label:"Ratings",align:"center",field:"ratingCount",sortable:!0},{name:"matchesPlayed",required:!0,label:"Matches",align:"center",field:"matchesPlayed",sortable:!0}],e={rowsPerPage:10,sortBy:"averageRating",descending:!0};return(d,c)=>(o(),u(z,{rows:s.players,columns:a,"row-key":"playerId",flat:"",bordered:"",pagination:e,loading:!1,"rows-per-page-options":[10,25,50],class:"statistics-table"},{"body-cell-averageRating":m(r=>[t(N,{props:r},{default:m(()=>[n("div",G,[t(C,{modelValue:r.row.averageRating,"onUpdate:modelValue":f=>r.row.averageRating=f,size:"sm",max:10,color:"amber",icon:"star_border","icon-selected":"star",readonly:"",class:"q-mr-sm"},null,8,["modelValue","onUpdate:modelValue"]),n("span",null,b(r.row.averageRating.toFixed(1)),1)])]),_:2},1032,["props"])]),_:1},8,["rows"]))}}),U=S`
  query GetTopPlayers($limit: Int) {
    topPlayers(limit: $limit) {
      playerId
      playerName
      averageRating
      ratingCount
      matchesPlayed
    }
  }
`,A=S`
  query GetTeamRatings($teamId: String!) {
    teamRatings(teamId: $teamId) {
      playerId
      playerName
      averageRating
      ratingCount
      matchesPlayed
    }
  }
`,w={useTopPlayers(i=10){const{result:s,loading:a,error:e,refetch:d}=T(U,{limit:i});return{topPlayers:s,loading:a,error:e,refetch:d}},useTeamRatings(i){const{result:s,loading:a,error:e,refetch:d}=T(A,{teamId:i});return{teamRatings:s,loading:a,error:e,refetch:d}}},F={key:0,class:"text-center q-pa-md"},L={key:1,class:"text-center q-pa-md"},M={class:"text-subtitle1 q-mt-sm text-negative"},Y=y({__name:"TopPlayers",setup(i){const{topPlayers:s,loading:a,error:e}=w.useTopPlayers(10);return $(()=>{}),(d,c)=>(o(),u(R,{class:"top-players-card"},{default:m(()=>[t(_,null,{default:m(()=>c[0]||(c[0]=[n("div",{class:"text-h6"},"Top Players",-1)])),_:1}),t(_,null,{default:m(()=>{var r;return[l(a)?(o(),g("div",F,[t(q,{color:"primary",size:"3em"}),c[1]||(c[1]=n("div",{class:"text-subtitle1 q-mt-sm"},"Loading top players...",-1))])):l(e)?(o(),g("div",L,[t(P,{name:"error",color:"negative",size:"3em"}),n("div",M,b(((r=l(e))==null?void 0:r.message)||"Failed to load top players"),1)])):(o(),u(h,{key:2,players:l(s)||[],class:"q-mt-md"},null,8,["players"]))]}),_:1})]),_:1}))}}),j=Q(Y,[["__scopeId","data-v-db33ec97"]]),D={key:0,class:"text-center q-pa-md"},O={key:1,class:"text-center q-pa-md"},W={class:"text-subtitle1 q-mt-sm text-negative"},Z=y({__name:"TeamStatistics",setup(i){const s=E(),{teams:a}=s,e=k(null),{teamRatings:d,loading:c,error:r}=w.useTeamRatings(e.value||""),f=v=>{e.value=v};return V(e,v=>{}),(v,p)=>(o(),u(R,{class:"team-statistics-card"},{default:m(()=>[t(_,null,{default:m(()=>p[1]||(p[1]=[n("div",{class:"text-h6"},"Team Statistics",-1)])),_:1}),t(_,null,{default:m(()=>{var x;return[t(B,{modelValue:e.value,"onUpdate:modelValue":[p[0]||(p[0]=I=>e.value=I),f],options:l(a),"option-label":"name","option-value":"id",label:"Select Team",outlined:"",class:"q-mb-md"},null,8,["modelValue","options"]),l(c)?(o(),g("div",D,[t(q,{color:"primary",size:"3em"}),p[2]||(p[2]=n("div",{class:"text-subtitle1 q-mt-sm"},"Loading team statistics...",-1))])):l(r)?(o(),g("div",O,[t(P,{name:"error",color:"negative",size:"3em"}),n("div",W,b(((x=l(r))==null?void 0:x.message)||"Failed to load team statistics"),1)])):(o(),u(h,{key:2,players:l(d)||[],class:"q-mt-md"},null,8,["players"]))]}),_:1})]),_:1}))}}),H=Q(Z,[["__scopeId","data-v-d20161ec"]]),J={class:"container mx-auto px-4 py-8"},ue=y({__name:"StatisticsPage",setup(i){return(s,a)=>(o(),g("div",J,[a[0]||(a[0]=n("h1",{class:"text-3xl font-bold mb-8"},"Statistics",-1)),t(j),t(H)]))}});export{ue as default};
