import{a as A,aC as pe,aD as _e,h as _,d as x,e as Z,m as ee,ae as be,aE as te,g as Te,r as D,w as H,aF as we,F as ae,ad as Ie,Q as K,D as Se,M as V,o as ne,N as M,L as w,Z as I,K as q,S as T,V as v,R as Y,W as R,X as S,J as Q,O as Le,P as xe,Y as ke,a9 as Me,T as Ce}from"./index-Dy41vZeH.js";import{Q as Ne}from"./QPage-DikFLRdI.js";import{g as oe}from"./index-hDARhCzz.js";import{Q as O}from"./QImg-BXh2iQIA.js";import{Q as $}from"./QTd-DslQV2fa.js";import{Q as G}from"./QTable-DxU9oMe0.js";import{a as se,c as E,b as B,Q as Re}from"./QList-6KR8mRab.js";import{b as qe,d as Qe,a as $e,e as De,y as Pe,h as J}from"./use-prevent-scroll-DjEyc7ZY.js";import{u as Be,a as Oe}from"./use-dark-DZmPTynO.js";import{u as ie}from"./teamService-KXnFOfry.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-CY_LcgHe.js";import"./QCheckbox-Co_-Q7p4.js";import"./private.use-form-C2TYF0yN.js";import"./scroll-CH_iSXnm.js";const Ae='<circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="60" cy="15" r="9" fill-opacity=".3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from=".5" to=".5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite"></animate></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite"></animate><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite"></animate></circle>',He=A({name:"QSpinnerDots",props:pe,setup(e){const{cSize:y,classes:h}=_e(e);return()=>_("svg",{class:h.value,fill:"currentColor",width:y.value,height:y.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",innerHTML:Ae})}});oe`
query GetMatchRatingsOnlyRatedPlayers($matchId: String!) {
  matchRatingsOnlyRatedPlayers(matchId: $matchId) {
    id
    homeTeam {
      name
    }
    awayTeam {
      name
    }
    homeTeamLineup {
      players {
        player {
          firstName
          lastName
          id
        }
        ratings{
          score
        }
        position
      }
      }
  awayTeamLineup {
        players {
          player {
           firstName
          lastName
          }
          ratings{
              score
          }
          position
        }
      }

  }
}
`;const Ee=oe`
query GetAllMatchRatingsOnlyRatedPlayers($beforeDate: DateTime) {
  allMatchRatingsOnlyRatedPlayers(beforeDate: $beforeDate, order: {scheduledDate: ASC}) {
    nodes {
      id
      scheduledDate
      homeTeam {
        name
      }
      awayTeam {
        name
      }
      homeTeamLineup {
        players {
          player {
            firstName
            lastName
            id
          }
          ratings {
            score
          }
          position
        }
      }
      awayTeamLineup {
        players {
          player {
            firstName
            lastName
          }
          ratings {
            score
          }
          position
        }
      }
    }
  }
}
`,W=A({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:y}){const h=x(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>{var c;return _("tr",{style:(c=e.props)==null?void 0:c.__trStyle,class:h.value},Z(y.default))}}}),Ve=A({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:y,emit:h}){let c=!1,b,m,g=null,t=null,o,l;function u(){b==null||b(),b=null,c=!1,g!==null&&(clearTimeout(g),g=null),t!==null&&(clearTimeout(t),t=null),m==null||m.removeEventListener("transitionend",o),o=null}function r(a,f,p){f!==void 0&&(a.style.height=`${f}px`),a.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,c=!0,b=p}function d(a,f){a.style.overflowY=null,a.style.height=null,a.style.transition=null,u(),f!==l&&h(f)}function n(a,f){let p=0;m=a,c===!0?(u(),p=a.offsetHeight===a.scrollHeight?0:void 0):(l="hide",a.style.overflowY="hidden"),r(a,p,f),g=setTimeout(()=>{g=null,a.style.height=`${a.scrollHeight}px`,o=L=>{t=null,(Object(L)!==L||L.target===a)&&d(a,"show")},a.addEventListener("transitionend",o),t=setTimeout(o,e.duration*1.1)},100)}function i(a,f){let p;m=a,c===!0?u():(l="show",a.style.overflowY="hidden",p=a.scrollHeight),r(a,p,f),g=setTimeout(()=>{g=null,a.style.height=0,o=L=>{t=null,(Object(L)!==L||L.target===a)&&d(a,"hide")},a.addEventListener("transitionend",o),t=setTimeout(o,e.duration*1.1)},100)}return ee(()=>{c===!0&&u()}),()=>_(be,{css:!1,appear:e.appear,onEnter:n,onLeave:i},y.default)}}),N=we({}),je=Object.keys(te),X=A({name:"QExpansionItem",props:{...te,...Qe,...Be,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...qe,"click","afterShow","afterHide"],setup(e,{slots:y,emit:h}){const{proxy:{$q:c}}=Te(),b=Oe(e,c),m=D(e.modelValue!==null?e.modelValue:e.defaultOpened),g=D(null),t=$e(),{show:o,hide:l,toggle:u}=De({showing:m});let r,d;const n=x(()=>`q-expansion-item q-item-type q-expansion-item--${m.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),i=x(()=>e.contentInsetLevel===void 0?null:{["padding"+(c.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),a=x(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),f=x(()=>{const s={};return je.forEach(k=>{s[k]=e[k]}),s}),p=x(()=>a.value===!0||e.expandIconToggle!==!0),L=x(()=>e.expandedIcon!==void 0&&m.value===!0?e.expandedIcon:e.expandIcon||c.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),P=x(()=>e.disable!==!0&&(a.value===!0||e.expandIconToggle===!0)),le=x(()=>({expanded:m.value===!0,detailsId:t.value,toggle:u,show:o,hide:l})),z=x(()=>{const s=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:c.lang.label[m.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":m.value===!0?"true":"false","aria-controls":t.value,"aria-label":s}});H(()=>e.group,s=>{d==null||d(),s!==void 0&&F()});function re(s){a.value!==!0&&u(s),h("click",s)}function ce(s){s.keyCode===13&&U(s,!0)}function U(s,k){var C;k!==!0&&s.qAvoidFocus!==!0&&((C=g.value)==null||C.focus()),u(s),Se(s)}function ue(){h("afterShow")}function de(){h("afterHide")}function F(){r===void 0&&(r=Pe()),m.value===!0&&(N[e.group]=r);const s=H(m,C=>{C===!0?N[e.group]=r:N[e.group]===r&&delete N[e.group]}),k=H(()=>N[e.group],(C,ye)=>{ye===r&&C!==void 0&&C!==r&&l()});d=()=>{s(),k(),N[e.group]===r&&delete N[e.group],d=void 0}}function me(){const s={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},k=[_(K,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&m.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:L.value})];return P.value===!0&&(Object.assign(s,{tabindex:0,...z.value,onClick:U,onKeyup:ce}),k.unshift(_("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),_(B,s,()=>k)}function ge(){let s;return y.header!==void 0?s=[].concat(y.header(le.value)):(s=[_(B,()=>[_(E,{lines:e.labelLines},()=>e.label||""),e.caption?_(E,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&s[e.switchToggleSide===!0?"push":"unshift"](_(B,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>_(K,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&s[e.switchToggleSide===!0?"unshift":"push"](me()),s}function he(){const s={ref:"item",style:e.headerStyle,class:e.headerClass,dark:b.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return p.value===!0&&(s.clickable=!0,s.onClick=re,Object.assign(s,a.value===!0?f.value:z.value)),_(se,s,ge)}function fe(){return ae(_("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:i.value,id:t.value},Z(y.default)),[[Ie,m.value]])}function ve(){const s=[he(),_(Ve,{duration:e.duration,onShow:ue,onHide:de},fe)];return e.expandSeparator===!0&&s.push(_(J,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:b.value}),_(J,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:b.value})),s}return e.group!==void 0&&F(),ee(()=>{d==null||d()}),()=>_("div",{class:n.value},[_("div",{class:"q-expansion-item__container relative-position"},ve())])}}),ze={class:"match-selector"},Ue={class:"teams-container"},Fe={key:0,class:"team-section"},Ke={class:"team-header"},Ye={class:"text-h6"},Ge={key:1,class:"team-section"},Je={class:"team-header"},We={class:"text-h6"},Xe=V({__name:"MatchDetails",props:{match:{}},setup(e){const y=ie(),h=D(!0),c=D(!0),b=[{name:"position",label:"Pos",field:"position",align:"center",sortable:!1},{name:"player",label:"Player",field:"player",align:"left",sortable:!1},{name:"rating",label:"Rating",field:"rating",align:"center",sortable:!1}],m=t=>t?t.some(o=>(o==null?void 0:o.ratings)&&o.ratings.length>0):!1,g=t=>t?y.getTeamById(t):null;return ne(async()=>{await y.init()}),(t,o)=>{var l,u,r,d;return w(),M("div",ze,[I("div",Ue,[(u=(l=t.match.homeTeamLineup)==null?void 0:l.players)!=null&&u.length?(w(),M("div",Fe,[T(X,{modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=n=>h.value=n),class:"team-expansion"},{header:v(()=>{var n,i,a,f,p;return[I("div",Ke,[(i=g((n=t.match.homeTeam)==null?void 0:n.id))!=null&&i.logo?(w(),Q(O,{key:0,src:(f=g((a=t.match.homeTeam)==null?void 0:a.id))==null?void 0:f.logo,class:"team-logo",fit:"contain"},null,8,["src"])):q("",!0),I("div",Ye,S(((p=t.match.homeTeam)==null?void 0:p.name)||"Home Team"),1)])]}),default:v(()=>[T(G,{rows:t.match.homeTeamLineup.players,columns:b,"row-key":"id",flat:"",bordered:"",dense:"",pagination:{rowsPerPage:0},class:Y({"opacity-5":!m(t.match.homeTeamLineup.players)}),dark:"","hide-bottom":""},{body:v(n=>[T(W,{props:n},{default:v(()=>[T($,{key:"position",props:n,class:"text-center"},{default:v(()=>[R(S(n.row.position),1)]),_:2},1032,["props"]),T($,{key:"player",props:n},{default:v(()=>{var i,a;return[R(S((i=n.row.player)==null?void 0:i.firstName)+" "+S((a=n.row.player)==null?void 0:a.lastName),1)]}),_:2},1032,["props"]),T($,{key:"rating",props:n,class:"text-center"},{default:v(()=>{var i,a;return[R(S(((a=(i=n.row.ratings)==null?void 0:i[0])==null?void 0:a.score)||"-"),1)]}),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","class"])]),_:1},8,["modelValue"])])):q("",!0),(d=(r=t.match.awayTeamLineup)==null?void 0:r.players)!=null&&d.length?(w(),M("div",Ge,[T(X,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=n=>c.value=n),class:"team-expansion"},{header:v(()=>{var n,i,a,f,p;return[I("div",Je,[(i=g((n=t.match.awayTeam)==null?void 0:n.id))!=null&&i.logo?(w(),Q(O,{key:0,src:(f=g((a=t.match.awayTeam)==null?void 0:a.id))==null?void 0:f.logo,class:"team-logo",fit:"contain"},null,8,["src"])):q("",!0),I("div",We,S(((p=t.match.awayTeam)==null?void 0:p.name)||"Away Team"),1)])]}),default:v(()=>[T(G,{rows:t.match.awayTeamLineup.players,columns:b,"row-key":"id",flat:"",bordered:"",dense:"",pagination:{rowsPerPage:0},class:Y({"opacity-5":!m(t.match.awayTeamLineup.players)}),dark:"","hide-bottom":""},{body:v(n=>[T(W,{props:n},{default:v(()=>[T($,{key:"position",props:n,class:"text-center"},{default:v(()=>[R(S(n.row.position),1)]),_:2},1032,["props"]),T($,{key:"player",props:n},{default:v(()=>{var i,a;return[R(S((i=n.row.player)==null?void 0:i.firstName)+" "+S((a=n.row.player)==null?void 0:a.lastName),1)]}),_:2},1032,["props"]),T($,{key:"rating",props:n,class:"text-center"},{default:v(()=>{var i,a;return[R(S(((a=(i=n.row.ratings)==null?void 0:i[0])==null?void 0:a.score)||"-"),1)]}),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","class"])]),_:1},8,["modelValue"])])):q("",!0)])])}}}),Ze=j(Xe,[["__scopeId","data-v-c5085910"]]),et={class:"match-selector-array"},tt={class:"team-names"},at={class:"team home"},nt={class:"team-name"},ot={class:"team away"},st={class:"team-name"},it=V({__name:"MatchList",props:{matches:{},selectedMatchId:{}},emits:["update:selectedMatchId"],setup(e,{emit:y}){const h=ie(),c=y,b=t=>{c("update:selectedMatchId",t)},m=t=>new Date(t).toLocaleDateString(),g=t=>t?h.getTeamById(t):null;return ne(async()=>{await h.init()}),(t,o)=>(w(),M("div",et,[T(Re,{separator:"",class:"horizontal-list"},{default:v(()=>[(w(!0),M(Le,null,xe(t.matches,l=>ae((w(),Q(se,{key:l.id,clickable:"",active:t.selectedMatchId===l.id,onClick:u=>b(l.id)},{default:v(()=>[T(B,null,{default:v(()=>{var u,r,d,n,i,a,f,p,L,P;return[I("div",tt,[I("div",at,[(r=g((u=l.homeTeam)==null?void 0:u.id))!=null&&r.logo?(w(),Q(O,{key:0,src:(n=g((d=l.homeTeam)==null?void 0:d.id))==null?void 0:n.logo,class:"team-logo",fit:"contain"},null,8,["src"])):q("",!0),I("div",nt,S(((i=l.homeTeam)==null?void 0:i.name)||"Home Team"),1)]),o[0]||(o[0]=I("div",{class:"vs"},"vs",-1)),I("div",ot,[(f=g((a=l.awayTeam)==null?void 0:a.id))!=null&&f.logo?(w(),Q(O,{key:0,src:(L=g((p=l.awayTeam)==null?void 0:p.id))==null?void 0:L.logo,class:"team-logo",fit:"contain"},null,8,["src"])):q("",!0),I("div",st,S(((P=l.awayTeam)==null?void 0:P.name)||"Away Team"),1)])]),T(E,{caption:""},{default:v(()=>[R(S(m(l.scheduledDate)),1)]),_:2},1024)]}),_:2},1024)]),_:2},1032,["active","onClick"])),[[ke]])),128))]),_:1})]))}}),lt=j(it,[["__scopeId","data-v-b4a83546"]]),rt={key:0,class:"text-center"},ct={key:1,class:"text-center"},ut={key:2,class:"match-ratings-container"},dt={class:"match-list-container"},mt={class:"match-display-container"},gt=V({__name:"MatchRatings",setup(e){const y=D([]),h=D(null),c=x(()=>y.value.filter(t=>{var u,r,d,n;const o=(r=(u=t.homeTeamLineup)==null?void 0:u.players)==null?void 0:r.some(i=>{var a;return((a=i==null?void 0:i.ratings)==null?void 0:a.length)>0}),l=(n=(d=t.awayTeamLineup)==null?void 0:d.players)==null?void 0:n.some(i=>{var a;return((a=i==null?void 0:i.ratings)==null?void 0:a.length)>0});return o||l}).map(t=>{var o,l;return{...t,homeTeamLineup:t.homeTeamLineup?{...t.homeTeamLineup,players:[...((o=t.homeTeamLineup)==null?void 0:o.players)||[]].sort((u,r)=>{const d=parseInt(u.position)||u.position,n=parseInt(r.position)||r.position;return d-n})}:null,awayTeamLineup:t.awayTeamLineup?{...t.awayTeamLineup,players:[...((l=t.awayTeamLineup)==null?void 0:l.players)||[]].sort((u,r)=>{const d=parseInt(u.position)||u.position,n=parseInt(r.position)||r.position;return d-n})}:null}})),b=x(()=>h.value?c.value.find(t=>t.id===h.value)||null:c.value[0]||null),{loading:m,onResult:g}=Me(Ee,{variables:{beforeDate:new Date().toISOString()}});return g(({data:t})=>{var o;(o=t==null?void 0:t.allMatchRatingsOnlyRatedPlayers)!=null&&o.nodes&&(y.value=t.allMatchRatingsOnlyRatedPlayers.nodes,c.value.length>0&&(h.value=c.value[0].id))}),(t,o)=>(w(),Q(Ne,{class:"q-pa-md"},{default:v(()=>[Ce(m)?(w(),M("div",rt,[T(He,{color:"primary",size:"40px"})])):c.value.length?(w(),M("div",ut,[I("div",dt,[T(lt,{matches:c.value,selectedMatchId:h.value,"onUpdate:selectedMatchId":o[0]||(o[0]=l=>h.value=l)},null,8,["matches","selectedMatchId"])]),I("div",mt,[b.value?(w(),Q(Ze,{key:0,match:b.value},null,8,["match"])):q("",!0)])])):(w(),M("div",ct,o[1]||(o[1]=[I("div",{class:"text-h6"},"No match ratings available",-1)])))]),_:1}))}}),Ct=j(gt,[["__scopeId","data-v-c24b599f"]]);export{Ct as default};
