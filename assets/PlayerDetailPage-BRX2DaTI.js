import{M as F,a1 as L,r as u,d as M,o as E,J as _,L as i,V as a,Z as o,S as e,N as p,i as b,$ as Y,X as s,T as k,W as c,Q as I,K as h}from"./index-C-zGrUoI.js";import{Q as P}from"./QBadge-CK3JAtXr.js";import{Q as U}from"./QImg-CMgBKVC3.js";import{Q as w}from"./QRating-DT3uO-5o.js";import{Q as V,a as D}from"./QCard-DOI4ZXPZ.js";import{Q as O,a as x,b as Q,c as m}from"./QList-ymlTHANC.js";import{Q as j}from"./QPage-CvRq0xGa.js";import{u as A,g as B,b as C}from"./players-CmO3y9R_.js";import{t as J}from"./teamService-CeYuJnEL.js";import{T as K}from"./TeamLogo-BOeFWqum.js";import{d as W}from"./date-Df0HJ916.js";import{u as X}from"./use-quasar-CxyViSnp.js";import{u as Z}from"./vue-i18n.runtime-DVqvX0-m.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-DJ6joreN.js";import"./private.use-form-BxgRZ4S9.js";import"./use-dark-Ckxuwpjg.js";import"./graphql-BhlZu-4f.js";import"./index-DzDBEjQp.js";const H={class:"q-pa-md"},ee={key:0,class:"flex justify-center q-pa-xl"},ae={key:1,class:"text-negative q-pa-md"},te={key:2,class:"player-detail"},le={class:"row q-col-gutter-lg"},oe={class:"col-xs-12 col-md-4 flex flex-center"},se={class:"absolute-full flex flex-center bg-grey-3"},re={class:"absolute-bottom text-subtitle2 text-center bg-dark q-pa-xs"},ie={class:"text-h5"},ne={class:"text-subtitle1"},de={class:"text-subtitle1 q-mt-xs"},ue={class:"col-xs-12 col-md-8"},ce={class:"text-h3 q-mt-none"},me={class:"text-subtitle1 q-mb-md"},pe={class:"q-mt-lg"},ve={class:"text-h5"},fe={class:"row items-center"},ye={class:"col-12 col-md-6"},_e={key:0,class:"text-subtitle1 q-mt-sm"},he={class:"col-12 col-md-6 q-mt-md q-mt-md-none"},ge={key:3,class:"text-center q-pa-xl"},be={class:"text-h6 text-grey-7"},xe=F({__name:"PlayerDetailPage",setup(Qe){const{t:N}=Z(),R=L(),t=u(null),v=u(null),f=u(!0),g=u(null),n=u(0),y=u(0),q=X(),S=A(),T=l=>{if(!l)return"N/A";try{return W.formatDate(l,"MMMM D, YYYY")}catch{return l}},z=()=>{t.value&&n.value>0&&(y.value=n.value,q.notify({type:"positive",message:N("players.detail.ratingSubmitted",{name:B(t.value)})}),n.value=0)},$=M(()=>t.value?B(t.value):"");return E(async()=>{const l=R.params.id;if(!l){g.value="Player ID is required",f.value=!1;return}try{f.value=!0;const d=await S.fetchPlayerById(l);if(t.value=d,!t.value)throw new Error("Player not found");if(t.value.teamId)try{const{team:r}=J.useTeam(t.value.teamId);v.value=r.value}catch(r){console.error("Error loading team:",r)}}catch(d){console.error("Error fetching player:",d),q.notify({color:"negative",message:"Failed to load player details",icon:"error"})}finally{f.value=!1}}),(l,d)=>(i(),_(j,{padding:""},{default:a(()=>[o("div",H,[e(b,{icon:"arrow_back",label:l.$t("players.detail.backToPlayers"),flat:"",color:"primary",to:"/players",class:"q-mb-md"},null,8,["label"]),f.value?(i(),p("div",ee,[e(Y,{color:"primary",size:"3em"})])):g.value?(i(),p("div",ae,s(g.value),1)):t.value?(i(),p("div",te,[o("div",le,[o("div",oe,[e(V,{flat:"",bordered:"",class:"player-card"},{default:a(()=>[e(U,{src:t.value.imageUrl||"https://via.placeholder.com/300?text="+l.$t("players.detail.noPhoto"),style:{height:"300px"},fit:"contain",class:"player-photo"},{error:a(()=>[o("div",se,[e(I,{name:"person",size:"4em",color:"grey-7"})])]),default:a(()=>[o("div",re,[e(P,{color:k(C)(t.value.position),class:"q-mr-xs"},{default:a(()=>[c(s(l.$t(`players.positions.${t.value.position.toLowerCase()}`)),1)]),_:1},8,["color"])])]),_:1},8,["src"]),e(D,{class:"text-center"},{default:a(()=>[o("div",ie,s($.value),1),o("div",ne,s(t.value.nationality),1),e(w,{modelValue:y.value,"onUpdate:modelValue":d[0]||(d[0]=r=>y.value=r),size:"1.5em",max:10,color:"amber",readonly:"",class:"q-mt-sm"},null,8,["modelValue"]),o("div",de,s(l.$t("players.detail.rating",{rating:y.value.toFixed(1)})),1)]),_:1})]),_:1})]),o("div",ue,[o("h1",ce,s($.value),1),o("div",me,s(t.value.nationality),1),e(O,{bordered:"",separator:""},{default:a(()=>[t.value.dateOfBirth?(i(),_(x,{key:0},{default:a(()=>[e(Q,null,{default:a(()=>[e(m,{caption:""},{default:a(()=>[c(s(l.$t("players.detail.birthDate")),1)]),_:1}),e(m,null,{default:a(()=>[c(s(T(t.value.dateOfBirth)),1)]),_:1})]),_:1})]),_:1})):h("",!0),e(x,null,{default:a(()=>[e(Q,null,{default:a(()=>[e(m,{caption:""},{default:a(()=>[c(s(l.$t("players.position")),1)]),_:1}),e(m,null,{default:a(()=>[e(P,{color:k(C)(t.value.position)},{default:a(()=>[c(s(l.$t(`players.positions.${t.value.position.toLowerCase()}`)),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1}),t.value.teamId?(i(),_(x,{key:1},{default:a(()=>[e(Q,null,{default:a(()=>[e(m,{caption:""},{default:a(()=>[c(s(l.$t("players.detail.team")),1)]),_:1}),e(m,{class:"row items-center"},{default:a(()=>{var r;return[v.value?(i(),_(K,{key:0,"team-id":v.value.id,size:"40"},null,8,["team-id"])):h("",!0),e(b,{flat:"","no-caps":"",color:"primary",to:`/teams/${t.value.teamId}`,label:((r=v.value)==null?void 0:r.name)||l.$t("players.detail.viewTeam")},null,8,["to","label"])]}),_:1})]),_:1})]),_:1})):h("",!0)]),_:1})])]),o("div",pe,[o("h2",ve,s(l.$t("players.detail.ratePlayer")),1),e(V,{flat:"",bordered:""},{default:a(()=>[e(D,null,{default:a(()=>[o("div",fe,[o("div",ye,[e(w,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=r=>n.value=r),size:"2em",max:10,color:"amber",icon:"star_border","icon-selected":"star"},null,8,["modelValue"]),n.value>0?(i(),p("div",_e,s(l.$t("players.detail.yourRating",{rating:n.value.toFixed(1)})),1)):h("",!0)]),o("div",he,[e(b,{color:"primary",label:l.$t("players.detail.submitRating"),disable:n.value===0,onClick:z},null,8,["label","disable"])])])]),_:1})]),_:1})])])):(i(),p("div",ge,[e(I,{name:"sports_soccer",size:"4em",color:"grey-7"}),o("p",be,s(l.$t("players.detail.playerNotFound")),1)]))])]),_:1}))}}),Ye=G(xe,[["__scopeId","data-v-6064b709"]]);export{Ye as default};
