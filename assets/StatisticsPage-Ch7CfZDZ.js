import{a as C,Q as A}from"./QCard-CVGY935i.js";import{a as B}from"./QCheckbox-CwaufW_b.js";import{d as R,R as T,S as n,U as h,f as x,$ as t,X as i,ai as S,r as f,w as I,V as p,Y as v,a1 as q,Q as V,c as w,L as D,au as P,av as N,F as Q,a4 as O,Z as $}from"./index-B0VQveaP.js";import{u as G}from"./teamService-COePzt3j.js";import{Q as E}from"./QRating-BO_aCy3d.js";import{Q as F}from"./QTd-B1QYTAX1.js";import{Q as L}from"./QTable-5tUk-Val.js";import{g as k,_ as U}from"./_plugin-vue_export-helper-C58nmRBO.js";import"./use-dark-lD2g5drB.js";import"./use-prevent-scroll-D4LJUV1U.js";import"./format-JhNblhKf.js";import"./scroll-arY7zoUF.js";import"./QList-zKzsZTH7.js";import"./private.use-form-C0ppHoVJ.js";const Y={class:"row items-center justify-center"},M=R({__name:"StatisticsTable",props:{players:{}},setup(c){const r=c,l=[{name:"playerName",required:!0,label:"Player",align:"left",field:"playerName",sortable:!0},{name:"averageRating",required:!0,label:"Rating",align:"center",field:"averageRating",sortable:!0},{name:"ratingCount",required:!0,label:"Ratings",align:"center",field:"ratingCount",sortable:!0},{name:"matchesPlayed",required:!0,label:"Matches",align:"center",field:"matchesPlayed",sortable:!0}],a={rowsPerPage:10,sortBy:"averageRating",descending:!0};return(m,o)=>(n(),T(L,{rows:r.players,columns:l,"row-key":"playerId",flat:"",bordered:"",pagination:a,loading:!1,"rows-per-page-options":[10,25,50],class:"statistics-table"},{"body-cell-averageRating":h(u=>[x(F,{props:u},{default:h(()=>[t("div",Y,[x(E,{modelValue:u.row.averageRating,"onUpdate:modelValue":_=>u.row.averageRating=_,size:"sm",max:10,color:"amber",icon:"star_border","icon-selected":"star",readonly:"",class:"q-mr-sm"},null,8,["modelValue","onUpdate:modelValue"]),t("span",null,i(u.row.averageRating.toFixed(1)),1)])]),_:2},1032,["props"])]),_:1},8,["rows"]))}}),z=k`
  query GetTopPlayers($limit: Int) {
    topPlayers(limit: $limit) {
      playerId
      playerName
      averageRating
      ratingCount
      matchesPlayed
    }
  }
`,j=k`
  query GetTeamRatings($teamId: String!) {
    teamRatings(teamId: $teamId) {
      playerId
      playerName
      averageRating
      ratingCount
      matchesPlayed
    }
  }
`,H=k`
  query GetDetailedPlayerStats(
    $sortBy: String
    $sortOrder: String
    $startDate: DateTime
    $endDate: DateTime
    $limit: Int
  ) {
    detailedPlayerStats(
      sortBy: $sortBy
      sortOrder: $sortOrder
      startDate: $startDate
      endDate: $endDate
      limit: $limit
    ) {
      playerId
      playerName
      goals
      assists
      yellowCards
      redCards
      matchesPlayed
      averageRating
      highestRating
      ratingCount
    }
  }
`,b={useTopPlayers(c=10){var o;const{result:r,loading:l,error:a,refetch:m}=S(z,{limit:c});return{topPlayers:((o=r.value)==null?void 0:o.topPlayers)||[],loading:l,error:a,refetch:m}},useTeamRatings(c){var o;const{result:r,loading:l,error:a,refetch:m}=S(j,{teamId:c});return{teamRatings:((o=r.value)==null?void 0:o.teamRatings)||[],loading:l,error:a,refetch:m}},useDetailedPlayerStats(c={}){var o;const{result:r,loading:l,error:a,refetch:m}=S(H,{variables:{sortBy:c.sortBy,sortOrder:c.sortOrder,startDate:c.startDate,endDate:c.endDate,limit:c.limit}});return{detailedPlayerStats:((o=r.value)==null?void 0:o.detailedPlayerStats)||[],loading:l,error:a,refetch:m}}},X={key:0,class:"text-center q-pa-md"},Z={key:1,class:"text-center q-pa-md"},J={class:"text-subtitle1 q-mt-sm text-negative"},K=R({__name:"TeamStatistics",setup(c){const r=G(),{teams:l}=r,a=f(null),{teamRatings:m,loading:o,error:u}=b.useTeamRatings(a.value||""),_=d=>{a.value=d};return I(a,d=>{}),(d,g)=>(n(),T(A,{class:"team-statistics-card"},{default:h(()=>[x(C,null,{default:h(()=>g[1]||(g[1]=[t("div",{class:"text-h6"},"Team Statistics",-1)])),_:1}),x(C,null,{default:h(()=>{var y;return[x(B,{modelValue:a.value,"onUpdate:modelValue":[g[0]||(g[0]=e=>a.value=e),_],options:v(l),"option-label":"name","option-value":"id",label:"Select Team",outlined:"",class:"q-mb-md"},null,8,["modelValue","options"]),v(o)?(n(),p("div",X,[x(q,{color:"primary",size:"3em"}),g[2]||(g[2]=t("div",{class:"text-subtitle1 q-mt-sm"},"Loading team statistics...",-1))])):v(u)?(n(),p("div",Z,[x(V,{name:"error",color:"negative",size:"3em"}),t("div",J,i(((y=v(u))==null?void 0:y.message)||"Failed to load team statistics"),1)])):(n(),T(M,{key:2,players:v(m)||[],class:"q-mt-md"},null,8,["players"]))]}),_:1})]),_:1}))}}),W=U(K,[["__scopeId","data-v-d20161ec"]]),tt={class:"bg-white rounded-lg shadow-md p-6 mb-8"},et={class:"flex justify-between items-center mb-6"},st={class:"flex gap-4"},at={class:"flex items-center gap-2"},ot={class:"flex items-center gap-2"},rt={class:"flex items-center gap-2"},lt={key:0,class:"text-center py-4"},it={key:1,class:"text-red-500 text-center py-4"},dt={key:2,class:"overflow-x-auto"},nt={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},mt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"text-sm font-medium text-gray-900"},pt={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-sm text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm text-gray-900"},Rt={class:"px-6 py-4 whitespace-nowrap"},St={class:"text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap"},Pt={class:"text-sm text-gray-900"},$t=R({__name:"DetailedPlayerStats",setup(c){const r=f("averageRating"),l=f("desc"),a=f("all"),m=f(10),o=w(()=>{const y=new Date;let e,s;switch(a.value){case"season":e=new Date(y.getFullYear(),7,1),s=y;break;case"month":e=new Date(y.setDate(y.getDate()-30)),s=new Date;break;default:e=void 0,s=void 0}return{startDate:e,endDate:s}}),{detailedPlayerStats:u,loading:_,error:d}=b.useDetailedPlayerStats({sortBy:r.value,sortOrder:l.value,startDate:o.value.startDate,endDate:o.value.endDate,limit:m.value}),g=w(()=>u||[]);return(y,e)=>(n(),p("div",tt,[t("div",et,[e[9]||(e[9]=t("h2",{class:"text-2xl font-bold"},"Player Statistics",-1)),t("div",st,[t("div",at,[e[4]||(e[4]=t("label",{class:"text-sm font-medium"},"Sort by:",-1)),D(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),class:"border rounded px-2 py-1"},e[3]||(e[3]=[N('<option value="goals">Goals</option><option value="assists">Assists</option><option value="goalsAndAssists">Goals + Assists</option><option value="yellowCards">Yellow Cards</option><option value="redCards">Red Cards</option><option value="averageRating">Average Rating</option><option value="highestRating">Highest Rating</option>',7)]),512),[[P,r.value]])]),t("div",ot,[e[6]||(e[6]=t("label",{class:"text-sm font-medium"},"Order:",-1)),D(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s),class:"border rounded px-2 py-1"},e[5]||(e[5]=[t("option",{value:"desc"},"Descending",-1),t("option",{value:"asc"},"Ascending",-1)]),512),[[P,l.value]])]),t("div",rt,[e[8]||(e[8]=t("label",{class:"text-sm font-medium"},"Time period:",-1)),D(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value=s),class:"border rounded px-2 py-1"},e[7]||(e[7]=[t("option",{value:"all"},"All time",-1),t("option",{value:"season"},"This season",-1),t("option",{value:"month"},"Last 30 days",-1)]),512),[[P,a.value]])])])]),v(_)?(n(),p("div",lt,e[10]||(e[10]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"},null,-1)]))):v(d)?(n(),p("div",it,i(v(d).message),1)):(n(),p("div",dt,[t("table",nt,[e[11]||(e[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Player"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Matches"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Goals"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assists"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Yellow Cards"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Red Cards"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Avg Rating"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Best Rating")])],-1)),t("tbody",ct,[(n(!0),p(Q,null,O(g.value,s=>(n(),p("tr",{key:s.playerId,class:"hover:bg-gray-50"},[t("td",mt,[t("div",ut,i(s.playerName),1)]),t("td",pt,[t("div",gt,i(s.matchesPlayed),1)]),t("td",yt,[t("div",xt,i(s.goals),1)]),t("td",vt,[t("div",_t,i(s.assists),1)]),t("td",ft,[t("div",ht,i(s.yellowCards),1)]),t("td",wt,[t("div",bt,i(s.redCards),1)]),t("td",Rt,[t("div",St,i(s.averageRating.toFixed(1)),1)]),t("td",Dt,[t("div",Pt,i(s.highestRating),1)])]))),128))])])]))]))}}),Tt={class:"container mx-auto px-4 py-8"},kt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Ct={class:"bg-white rounded-lg shadow-md p-6"},At={key:0,class:"text-2xl font-bold"},Bt={class:"text-gray-600"},It={class:"bg-white rounded-lg shadow-md p-6"},qt={key:0,class:"text-2xl font-bold"},Vt={class:"text-gray-600"},Nt={class:"bg-white rounded-lg shadow-md p-6"},Qt={key:0,class:"text-2xl font-bold"},Ot={class:"text-gray-600"},Wt=R({__name:"StatisticsPage",setup(c){const{detailedPlayerStats:r}=b.useDetailedPlayerStats({sortBy:"goals",sortOrder:"desc",limit:1}),{detailedPlayerStats:l}=b.useDetailedPlayerStats({sortBy:"assists",sortOrder:"desc",limit:1}),{detailedPlayerStats:a}=b.useDetailedPlayerStats({sortBy:"averageRating",sortOrder:"desc",limit:1}),m=w(()=>(r==null?void 0:r[0])||null),o=w(()=>(l==null?void 0:l[0])||null),u=w(()=>(a==null?void 0:a[0])||null);return(_,d)=>{var g,y,e,s;return n(),p("div",Tt,[d[3]||(d[3]=t("h1",{class:"text-3xl font-bold mb-8"},"Statistics",-1)),t("div",kt,[t("div",Ct,[d[0]||(d[0]=t("h3",{class:"text-lg font-semibold mb-2"},"Top Scorer",-1)),m.value?(n(),p("div",At,i(m.value.playerName),1)):$("",!0),t("div",Bt,i(((g=m.value)==null?void 0:g.goals)||0)+" goals",1)]),t("div",It,[d[1]||(d[1]=t("h3",{class:"text-lg font-semibold mb-2"},"Most Assists",-1)),o.value?(n(),p("div",qt,i(o.value.playerName),1)):$("",!0),t("div",Vt,i(((y=o.value)==null?void 0:y.assists)||0)+" assists",1)]),t("div",Nt,[d[2]||(d[2]=t("h3",{class:"text-lg font-semibold mb-2"},"Best Rated Player",-1)),u.value?(n(),p("div",Qt,i(u.value.playerName),1)):$("",!0),t("div",Ot,"Rating: "+i(((s=(e=u.value)==null?void 0:e.averageRating)==null?void 0:s.toFixed(1))||0),1)])]),x($t),x(W)])}}});export{Wt as default};
